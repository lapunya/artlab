(function(){function t(t){null==t&&(t={}),this.draw=bind(this.draw,this),this.config=this.extend(t,this.defaults)}bind=function(t,e){return function(){return t.apply(e,arguments)}},this.stackedCards=(t.prototype.defaults={layout:"slide",onClick:void 0,transformOrigin:"center"},t.prototype.init=function(){this.element=window.document.documentElement,"interactive"===(ref=document.readyState)||"complete"===ref?this.draw():document.addEventListener("DOMContentLoaded",this.draw)},t.prototype.draw=function(){var o=this,t=this.config.selector;this.els=document.querySelectorAll(t+" li");var r=this.els;this.parent=r[0].parentNode;var e=r[0].getBoundingClientRect().height;r[0].parentNode.style.height=parseInt(e)+"px";var n=r.length%2==0?-2:-1,i=(r.length+n)/2;this.detectSwipe(),Array.prototype.forEach.call(r,function(i){i.style.transformOrigin=o.config.transformOrigin,i.addEventListener("click",function(){var t=i,e=0,n=0;do{t.nextElementSibling;e+=1}while(t=t.nextElementSibling);t=i;do{t.previousElementSibling;n+=1}while(t=t.previousElementSibling);o.reCalculateTransformsOnClick(e-1,n-1),o.loopNodeList(r,function(t){t.classList.remove("active")}),i.classList.add("active"),i.classList.add(o.config.layout),i.style.zIndex=5*r.length,i.style.transform="translate(-50%, 0%)  scale(1)",void 0!==o.config.onClick&&o.config.onClick(i)})}),r[i].click()},t.prototype.reCalculateTransformsOnClick=function(t,e){for(var n=10,i=this.nodelistToArray(this.els),o=1,r=0,a="",l=this.config.layout,c=Math.max(e,t),s=100/c,d=100/c,o=t<e?0+100/(e+1)/100:1-e*(1/(t+1)),u=10*e/e*e*-1,f=10*t/t,h=0;h<e;h++){switch(l){case"slide":0<h&&(o+=100/(c+1)/100),r=-50-s*(e-h),a="rotate(0deg)";break;case"fanOut":0<h&&(o+=100/(c+1)/100),r=-50-s*(e-h),a="rotate("+u+"deg)",u+=10*e/e;break;default:r=-1*(150-2*s*h),a="rotate(0deg)"}var g="translate("+r+"%, 0%)  scale("+o+") "+a;n+=1,i[h].style.transform=g,i[h].style.zIndex=n}--n;for(var p=0,h=e+(o=1);h<t+e+1;h++){switch(p+=1,l){case"slide":o-=100/(c+1)/100,r=-1*(50-d*p),a="rotate(0deg)";break;case"fanOut":o-=100/(c+1)/100,r=-1*(50-d*p),a="rotate("+f+"deg)",f+=10*t/t;break;default:r=-1*(50-2*s*h),a="rotate(0deg)"}--n;g="translate("+r+"%, 0%)  scale("+o+") "+a;i[h].style.transform=g,i[h].style.zIndex=n}},t.prototype.detectSwipe=function(){var n=this,t=document.querySelector(n.config.selector);n.detectSwipeDir(t,function(t){var e=document.querySelector(n.config.selector+" li.active");"left"==t?e.nextElementSibling.click():"right"==t&&e.previousElementSibling.click()})},t.prototype.extend=function(t,e){var n,i;for(n in e)i=e[n],null==t[n]&&(t[n]=i);return t},t.prototype.nodelistToArray=function(t){for(var e,n=[],i=0;i<t.length;i++)e=t[i],n.push(e);return n},t.prototype.loopNodeList=function(t,e,n){for(var i=0;i<t.length;i++)e.call(n,t[i])},t.prototype.scrolledIn=function(t,e){if(void 0!==t){var n=t.getBoundingClientRect().top;t.getBoundingClientRect().bottom;return 0<=n&&n<=window.innerHeight}},t.prototype.detectSwipeDir=function(t,e){var n,i,o,r,a,l,c=t,s=e||function(t){};c.addEventListener("touchstart",function(t){var e=t.changedTouches[0];n="none",dist=0,i=e.pageX,o=e.pageY,l=(new Date).getTime(),t.preventDefault()},!1),c.addEventListener("touchmove",function(t){},!1),c.addEventListener("touchend",function(t){var e=t.changedTouches[0];r=e.pageX-i,a=e.pageY-o,(new Date).getTime()-l<=300&&(75<=Math.abs(r)&&Math.abs(a)<=100?n=r<0?"left":"right":75<=Math.abs(a)&&Math.abs(r)<=100&&(n=a<0?"up":"down")),s(n),t.preventDefault()},!1)},t)}).call(this);